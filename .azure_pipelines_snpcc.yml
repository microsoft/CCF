pr:
  branches:
    include:
      - main
  paths:
    include:
      - .azure_pipelines_snpcc.yml
      - .snpcc_canary

trigger: none

jobs:
  - template: .azure-pipelines-templates/configure.yml

  - template: common.yml
    parameters:
      target: SNPCC
      pool: sev-snp-pool
      cmake_args: "-DCOMPILE_TARGET=snp -DCMAKE_BUILD_TYPE=Debug -DLVI_MITIGATIONS=OFF -DVERBOSE_LOGGING=ON"
      suffix: "Debug"
      artifact_name: "SNPCC_Debug"
      ctest_filter: '-LE "benchmark|perf|tlstest|vegeta|suite"'
      depends_on: configure
