# Re-usable workflow for per-platform container build

on:
  workflow_call:
    inputs:
      platform:
        required: true
        type: string
      tag:
        required: true
        type: string

jobs:
  template_build_container:
    runs-on: ubuntu-latest
    steps:
      - name: Build App Dev ${{ inputs.platform }} container
        run: docker build -f docker/app_dev . --build-arg="platform=${{ inputs.platform }}" --build-arg="ansible_vars=ccf_ver=${{ inputs.tag }}" -t $ACR_REGISTRY/public/ccf/app/dev:${{ inputs.tag }}-${{ inputs.platform }} -t $ACR_REGISTRY/public/ccf/app/dev:lts-devcontainer-${{ inputs.platform }}
