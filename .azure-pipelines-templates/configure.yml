jobs:
  - job: configure
    displayName: "Configure CI"
    variables:
      Codeql.SkipTaskAutoInjection: true
      skipComponentGovernanceDetection: true
    pool:
      vmImage: "ubuntu-20.04"
    steps:
      - script: |
          set -ex
          echo '##vso[task.setvariable variable=varA]hello'
          echo "I've just set varA"
        condition: succeededOrFailed()

      - script: |
          set -ex
          echo "##vso[task.setvariable variable=varB]hello"
          echo "I've just set varB"
        condition: succeededOrFailed()

      - script: |
          echo "varA=$(varA)"
          echo "varB=$(varB)"
        displayName: Display VSO Vars
        condition: succeededOrFailed()

      - checkout: self
        clean: true

      - script: |
          echo "##vso[task.setvariable variable=docOnly;isOutput=true]true"

        displayName: "Check for runtime changes"
        name: setVarStep
