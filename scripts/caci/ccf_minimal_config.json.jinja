{
  "enclave": {
    "platform": "{{ platform_title_case }}",
    "type": "Release"
  },
  "network": {
    "node_to_node_interface": {
      "bind_address": "0.0.0.0:8081",
      "published_address": "{{ fqdn }}:8081"
    },
    "rpc_interfaces": {
      "primary_interface": {
        "bind_address": "0.0.0.0:443",
        "published_address": "{{ fqdn }}:443"
      }
    }
  },
  "command": {
    "service_certificate_file": "/mnt/ccf/service_cert.pem",
    {% if command == "start" -%}
    "type": "Start",
    "start": {
      "constitution_files": [
        "/opt/ccf_{{ platform }}/bin/validate.js",
        "/opt/ccf_{{ platform }}/bin/apply.js",
        "/opt/ccf_{{ platform }}/bin/resolve.js",
        "/opt/ccf_{{ platform }}/bin/actions.js"
      ],
      "members": [
        {
          "certificate_file": "/mnt/ccf/member0_cert.pem",
          "encryption_public_key_file": "/mnt/ccf/member0_enc_pubk.pem"
        }
      ]
    }
    {% elif command == "join" -%}
    "type": "Join",
    "join": {
      "retry_timeout": "1s",
      "target_rpc_address": "{{ target_rpc_address }}"
    }
    {% endif %}
  }
  {% if platform == "snp" %}
  ,
  "attestation": {
    "snp_endorsements_servers": [
      {
        "type": "THIM",
        "url": "$Fabric_NodeIPOrFQDN:2377"
      }
    ],
    "snp_security_policy_file": "$UVM_SECURITY_CONTEXT_DIR/security-policy-base64",
    "snp_uvm_endorsements_file": "$UVM_SECURITY_CONTEXT_DIR/reference-info-base64"{% if version >= 6 %},
    "snp_endorsements_file": "$UVM_SECURITY_CONTEXT_DIR/host-amd-cert-base64"{% endif %}
  }
  {% endif %}
}